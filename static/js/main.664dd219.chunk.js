(this["webpackJsonpdashnotes-web"]=this["webpackJsonpdashnotes-web"]||[]).push([[0],{17:function(t,e,a){t.exports=a(42)},22:function(t,e,a){},23:function(t,e,a){},42:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),c=a(11),i=a.n(c),s=(a(22),a(14)),l=a(12),r=a(13),u=a(16),h=a(15),m=(a(23),{url:{API_URL:"https://myapp.herokuapp.com",API_URL_USERS:"https://myapp.herokuapp.com/users"}}),k=a(24).default,d=m.url.API_URL,g=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){var t;return Object(l.a)(this,a),(t=e.call(this)).onGetStickiesClick=function(e){t.getStickies()},t.onLogoutButtonClick=function(e){localStorage.removeItem("DASHNOTES_AUTH_CODE"),t.setState({stickies:[],user:null})},t.onSubmitNewSticky=function(e){if(""!==t.state.newStickyBody){e.preventDefault();var a=localStorage.getItem("DASHNOTES_AUTH_CODE");k.post("".concat(d,"/my-stickies"),{body:t.state.newStickyBody},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then((function(e){t.setState({stickies:[].concat(Object(s.a)(t.state.stickies),[e.data.sticky])})})).catch((function(t){console.log("creating a new sticky didn't work",t)}))}},t.onClickMyStickies=function(e){t.getMyStickies()},t.onChangeNewStickyBody=function(e){t.setState({newStickyBody:e.target.value})},t.state={stickies:[],newStickyBody:""},t}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=window.location.href.match(/\/?code=(.*)/)&&window.location.href.match(/\/?code=(.*)/)[1],a=localStorage.getItem("DASHNOTES_AUTH_CODE");a?k.get("".concat(d,"/users"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then((function(e){t.setState({user:{name:e.data.name,username:e.data.username,avatar_url:e.data.avatar_url},stickies:e.data.stickies})})).catch((function(t){console.log("getting details about the user from be didn't work",t)})):e?k.post("".concat(d,"/auth/callback/gh/").concat(e),{code:e},{headers:{"Access-Control-Allow-Headers":"X-Requested-With, content-type"}}).then((function(e){t.setState({user:{name:e.data.name,username:e.data.username,avatar_url:e.data.avatar_url},stickies:e.data.stickies}),localStorage.setItem("DASHNOTES_AUTH_CODE",e.data.auth_code)})).catch((function(t){console.log("going through gh oauth cycle without saved login info didn't work",t)})):console.log("no login info saved, or haven't just gone through gh oauth callback")}},{key:"getStickies",value:function(){var t=this,e=localStorage.getItem("DASHNOTES_AUTH_CODE");k.get("".concat(d,"/stickies"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){t.setState({stickies:e.data.stickies})})).catch((function(t){console.log("getting all stickies didn't work",t)}))}},{key:"getMyStickies",value:function(){var t=this,e=localStorage.getItem("DASHNOTES_AUTH_CODE");k.get("".concat(d,"/my-stickies"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){t.setState({stickies:e.data.stickies})})).catch((function(t){console.log("getting my stickies didn't work",t)}))}},{key:"render",value:function(){var t=this.state.stickies.map((function(t){return o.a.createElement("li",{key:t.id},o.a.createElement("p",null,t.body),o.a.createElement("p",null,t.username))}));return o.a.createElement("div",null,o.a.createElement("nav",null,o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"https://github.com/login/oauth/authorize?client_id=".concat("Iv1.13f31d855859ad99")},"Login to GitHub")),o.a.createElement("li",null,o.a.createElement("button",{onClick:this.onLogoutButtonClick},"Log Out")))),o.a.createElement("section",null,o.a.createElement("h1",null,"Welcome",this.state.user?" back, ".concat(this.state.user.name," (").concat(this.state.user.username,")!"):"!"),this.state.user?o.a.createElement("img",{src:this.state.user.avatar_url,alt:"lol"}):""),o.a.createElement("section",null,o.a.createElement("h2",null,"My Stickies"),o.a.createElement("ul",null,t),o.a.createElement("form",{onSubmit:this.onSubmitNewSticky},o.a.createElement("h3",null,o.a.createElement("label",{htmlFor:"new-sticky"},"Write a New Sticky")),o.a.createElement("input",{type:"text",onChange:this.onChangeNewStickyBody,name:"new-sticky"}),o.a.createElement("input",{type:"submit"}))),o.a.createElement("button",{onClick:this.onGetStickiesClick},"Get ALL Stickies"))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.664dd219.chunk.js.map